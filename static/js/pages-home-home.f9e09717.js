(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-home"],{"0e8a":function(e,t,i){"use strict";var n=i("9679"),a=i.n(n);a.a},"19f8":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".douji-wrap[data-v-07547dfb]{background:#fff;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between}.douji-list-left[data-v-07547dfb]{font-size:%?28?%}.active[data-v-07547dfb]{color:#1989fa}.btn-center[data-v-07547dfb]{display:flex;align-items:center;justify-content:center}.btn-center-margin[data-v-07547dfb]{margin-top:%?20?%}.attr-flex[data-v-07547dfb]{width:100%;display:flex;flex-wrap:wrap;justify-content:space-between}.attr-flex-item-3[data-v-07547dfb]{width:33.3%;\r\n\t/* 加入这两个后每个item的宽度就生效了 */min-width:33.3%;max-width:33.3%}.attr-flex-item-2[data-v-07547dfb]{width:48%;\r\n\t/* 加入这两个后每个item的宽度就生效了 */min-width:48%;max-width:48%}.attr-flex-item-1[data-v-07547dfb]{width:100%}.attr-flex-item[data-v-07547dfb]{flex:1;flex-basis:auto;width:33.3%;\r\n\t/* 加入这两个后每个item的宽度就生效了 */min-width:33.3%;max-width:33.3%}.flex-lixian-item[data-v-07547dfb]{flex:1;flex-basis:auto;width:65%;min-width:65%;max-width:65%}.list-cell[data-v-07547dfb]{display:flex;flex:1;flex-basis:auto;flex-direction:row;justify-content:space-between;align-items:center}.content .uni-list-cell-left[data-v-07547dfb]{width:25%;text-align:right}.flex-item-two[data-v-07547dfb]{display:flex;width:48%;min-width:48%;max-width:48%}.radio-flex[data-v-07547dfb]{display:flex}.radio-flex-item[data-v-07547dfb]{flex:1;flex-basis:auto;width:32%;\r\n\t/* 加入这两个后每个item的宽度就生效了 */min-width:32%;max-width:32%}.uni-list-no-border[data-v-07547dfb]{background-color:#fff;position:relative;width:100%;display:flex;flex-direction:column}.uni-list-cell-no-border[data-v-07547dfb]{position:relative;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.uni-list-cell-pd-mini[data-v-07547dfb]{padding:%?5?% %?30?% %?5?% %?10?%}.danger[data-v-07547dfb]{color:red}.save-btn[data-v-07547dfb]{margin:%?50?%;text-align:center}.waring-wrap[data-v-07547dfb]{color:red;margin-top:%?10?%;white-space:pre-line;-webkit-user-select:text;user-select:text}.content-wrap[data-v-07547dfb]{-webkit-user-select:text;user-select:text}.fuzhu-info[data-v-07547dfb]{display:flex;align-items:center}.copy-button[data-v-07547dfb]{margin-left:%?40?%}",""]),e.exports=t},"51d7":function(e,t,i){"use strict";var n;i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return n}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"content"},[e.flag.showServer?i("v-uni-view",[i("v-uni-view",{staticClass:"list-cell"},[i("v-uni-view",{staticClass:"uni-list-cell-left"},[e._v("服务器：")]),i("v-uni-view",{staticClass:"uni-list-cell-db"},[i("v-uni-picker",{staticClass:"bg-picker-douji",attrs:{value:e.lastServerIndex,"range-key":"text",range:e.serverInfo.last_server_list},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.changeLastServer.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"uni-input"},[e._v(e._s(e.serverName))])],1)],1)],1),i("v-uni-view",{staticClass:"list-cell"},[i("v-uni-view",{staticClass:"uni-list-cell-left"},[e._v("收藏的角色：")]),i("v-uni-view",{staticClass:"uni-list-cell-db"},[i("v-uni-picker",{staticClass:"bg-picker-douji",attrs:{value:e.roleIndex,"range-key":"roleName",range:e.roleList},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.changeSavedRoleList.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"uni-input"},[e._v(e._s(e.selectRoleName))])],1)],1)],1)],1):e._e(),e.flag.showServer?i("v-uni-view",[i("v-uni-view",{staticClass:"btn-center btn-center-margin"},[i("v-uni-view",[i("v-uni-button",{attrs:{type:"primary",plain:"true",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.transferTime.apply(void 0,arguments)}}},[e._v("转移辅助")]),i("v-uni-text",{staticStyle:{width:"10upx",display:"inline-block"}}),i("v-uni-button",{attrs:{type:"primary",plain:"true",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.loginSwitch.apply(void 0,arguments)}}},[e._v("切换账号")]),i("v-uni-text",{staticStyle:{width:"10upx",display:"inline-block"}}),i("v-uni-button",{attrs:{type:"primary",plain:"true",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleGerServer.apply(void 0,arguments)}}},[e._v("更新服务器")])],1)],1),i("v-uni-view",{staticClass:"btn-center"},[i("v-uni-view",[i("v-uni-button",{attrs:{type:"primary",plain:"true",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleSaveRole.apply(void 0,arguments)}}},[e._v("收藏角色")]),i("v-uni-text",{staticStyle:{width:"10upx",display:"inline-block"}}),i("v-uni-button",{attrs:{type:"primary",plain:"true",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleRemoveRole.apply(void 0,arguments)}}},[e._v("移除收藏")]),i("v-uni-text",{staticStyle:{width:"10upx",display:"inline-block"}}),i("v-uni-button",{attrs:{type:"primary",plain:"true",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleClearSaveRole.apply(void 0,arguments)}}},[e._v("清空收藏")])],1)],1)],1):i("v-uni-view",{staticClass:"btn-row"},[i("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleLogin.apply(void 0,arguments)}}},[e._v("登录")])],1),e.utils.showCommon?i("v-uni-text",{staticClass:"waring-wrap"},[e._v(e._s(e.utils.common))]):e._e(),e.utils.showContact&&"test"===e.wdszSaleChannel?i("v-uni-text",{staticClass:"waring-wrap"},[e._v(e._s(e.utils.contact))]):e._e(),e.utils.showContact1&&"1"===e.wdszSaleChannel?i("v-uni-text",{staticClass:"waring-wrap"},[e._v(e._s(e.utils.contact1))]):e._e(),e.utils.showContact2&&"2"===e.wdszSaleChannel?i("v-uni-text",{staticClass:"waring-wrap"},[e._v(e._s(e.utils.contact2))]):e._e(),e.utils.showContact3&&"3"===e.wdszSaleChannel?i("v-uni-text",{staticClass:"waring-wrap"},[e._v(e._s(e.utils.contact3))]):e._e(),e.utils.showContact4&&"4"===e.wdszSaleChannel?i("v-uni-text",{staticClass:"waring-wrap"},[e._v(e._s(e.utils.contact4))]):e._e(),e.utils.showContact5&&"5"===e.wdszSaleChannel?i("v-uni-text",{staticClass:"waring-wrap"},[e._v(e._s(e.utils.contact5))]):e._e(),e.utils.showContact7&&"7"===e.wdszSaleChannel?i("v-uni-text",{staticClass:"waring-wrap"},[e._v(e._s(e.utils.contact7))]):e._e(),e.utils.showContact8&&"8"===e.wdszSaleChannel?i("v-uni-text",{staticClass:"waring-wrap"},[e._v(e._s(e.utils.contact8))]):e._e(),e.utils.showContact31&&"31"===e.wdszSaleChannel?i("v-uni-text",{staticClass:"waring-wrap"},[e._v(e._s(e.utils.contact31))]):e._e(),i("v-uni-view",{staticClass:"uni-divider"},[i("v-uni-view",{staticClass:"uni-divider__content"},[e._v("云挂机")]),i("v-uni-view",{staticClass:"uni-divider__line"})],1),i("v-uni-view",[i("v-uni-text",[e._v("平台：")]),i("v-uni-text",[e._v(e._s(this.platformName))])],1),i("v-uni-view",[i("v-uni-text",[e._v("区服：")]),i("v-uni-text",[e._v(e._s(e.serverName))])],1),i("v-uni-view",[i("v-uni-text",[e._v("角色名：")]),i("v-uni-text",[e._v(e._s(e.roleInfo.role_name))])],1),i("v-uni-view",[i("v-uni-text",[e._v("辅助版本类型：")]),i("v-uni-text",[e._v(e._s(e._f("vipStatus")(e.fuzuStatus.fuzhu_vip)))])],1),i("v-uni-view",[i("v-uni-text",[e._v("辅助到期时间：")]),i("v-uni-text",{class:{danger:e.fuzuStatus.isExpired}},[e._v(e._s(e.fuzuStatus.end_time))])],1),1===e.bayeSpecial?i("v-uni-view",[i("v-uni-text",[e._v("增强霸业到期时间：")]),i("v-uni-text",[e._v(e._s(e.fuzuStatus.special_baye_endtime))])],1):e._e(),i("v-uni-view",[i("v-uni-text",[e._v("数据更新时间：")]),i("v-uni-text",{class:{danger:e.isPassedTwoHours}},[e._v(e._s(e.roleInfo.update_time))])],1),i("v-uni-view",{staticClass:"fuzhu-info"},[i("v-uni-text",[e._v("续费请提供此ID：")]),i("v-uni-text",{staticClass:"content-wrap"},[e._v(e._s(e.loginInfo.userId))]),i("v-uni-button",{staticClass:"copy-button",attrs:{type:"primary",plain:"true",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.doCopy.apply(void 0,arguments)}}},[e._v("复制")])],1),i("v-uni-view",[i("v-uni-text",[e._v("云挂机状态：")]),i("v-uni-text",[e._v(e._s(e._f("statusFilter")(e.fuzuStatus.on_off)))])],1),i("v-uni-view",{staticClass:"btn-center"},[i("v-uni-view",[e.fuzuStatus.on_off?i("v-uni-button",{attrs:{type:"warn",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleStopguaji.apply(void 0,arguments)}}},[e._v("停止云挂机")]):i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleStartguaji.apply(void 0,arguments)}}},[e._v("开启云挂机")]),i("v-uni-text",{staticStyle:{width:"10upx",display:"inline-block"}}),i("v-uni-button",{attrs:{loading:e.statusLoading,disabled:e.statusLoading,type:"primary",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleGuajiStatus.apply(void 0,arguments)}}},[e._v("获取最新数据")])],1)],1),e._l(e.viewConfig.gameInfoConfig,(function(t,n){return i("v-uni-view",{key:n},[i("v-uni-view",{staticClass:"uni-divider"},[i("v-uni-view",{staticClass:"uni-divider__content"},[e._v(e._s(t.label))]),i("v-uni-view",{staticClass:"uni-divider__line"})],1),i("v-uni-view",{staticClass:"attr-flex"},e._l(e.viewConfig[t.key],(function(t){return i("v-uni-view",{key:t.key,class:e.getAttrClass(t.columnSize)},[i("v-uni-text",[e._v(e._s(t.label))]),i("v-uni-text",[e._v(e._s(e._f("valueFormatFilter")(e.roleInfo[t.key])))])],1)})),1)],1)})),i("v-uni-view",{staticClass:"uni-divider"},[i("v-uni-view",{staticClass:"uni-divider__content"},[e._v("挂机设置")]),i("v-uni-view",{staticClass:"uni-divider__line"})],1),i("v-uni-view",{staticClass:"uni-list-no-border"},[i("v-uni-view",{staticClass:"uni-list-cell uni-list-cell-pd-mini"},[i("v-uni-view",{staticClass:"uni-list-cell-db"},[e._v("领取离线倍数")]),i("v-uni-radio-group",{staticClass:"flex-lixian-item radio-flex",on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.radioChangeLixian.apply(void 0,arguments)}}},e._l(e.lixianbeishuList,(function(t,n){return i("v-uni-label",{key:t.value,staticClass:"radio-flex-item"},[i("v-uni-radio",{attrs:{value:t.value,checked:n===e.currentLilianBeishu}}),e._v(e._s(t.name))],1)})),1)],1),i("v-uni-view",{staticClass:"uni-list-cell uni-list-cell-pd-mini"},[i("v-uni-view",{staticClass:"uni-list-cell-db"},[e._v("领取游历倍数")]),i("v-uni-radio-group",{staticClass:"flex-lixian-item radio-flex",on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.radioChangeYouli.apply(void 0,arguments)}}},e._l(e.youlibeishuList,(function(t,n){return i("v-uni-label",{key:t.value,staticClass:"radio-flex-item"},[i("v-uni-radio",{attrs:{value:t.value,checked:n===e.currentYouliBeishu}}),e._v(e._s(t.name))],1)})),1)],1),e._l(e.viewConfig.switchConfig,(function(t){return i("v-uni-view",{key:t.key,staticClass:"uni-list-cell uni-list-cell-pd-mini"},[i("v-uni-view",{staticClass:"uni-list-cell-db"},[e._v(e._s(t.label))]),i("v-uni-switch",{attrs:{checked:!!e.configInfo[t.key]},on:{change:function(i){arguments[0]=i=e.$handleEvent(i),e.changeSwitchBoolean(t.key)}}})],1)})),e._l(e.viewConfig.pickerSwitchConfig,(function(t){return i("v-uni-view",{key:t.key,staticClass:"uni-list-cell-no-border uni-list-cell-pd-mini"},[e.checkShow(t.special)?i("v-uni-view",{staticClass:"flex-item-two"},[i("v-uni-view",{staticClass:"uni-list-cell-db"},[i("v-uni-picker",{staticClass:"background-picker",attrs:{value:e.configInfo[t.key],"range-key":"text",range:e.options[t.key]},on:{change:function(i){arguments[0]=i=e.$handleEvent(i),e.changePickerConfig(i,t.key)}}},[i("v-uni-view",{staticClass:"uni-input"},[e._v(e._s(e.options[t.key][e.configInfo[t.key]].text))])],1)],1)],1):e._e(),e.checkShow(t.special)?i("v-uni-view",{staticClass:"flex-item-two"},[i("v-uni-view",{staticClass:"uni-list-cell-db"},[e._v(e._s(t.label))]),i("v-uni-switch",{attrs:{checked:!!e.configInfo[t.key]},on:{change:function(i){arguments[0]=i=e.$handleEvent(i),e.changePickerSwith(i,t.key)}}})],1):e._e()],1)}))],2),i("v-uni-view",{staticClass:"uni-divider"},[i("v-uni-view",{staticClass:"uni-divider__content"},[e._v("秘籍设置")]),i("v-uni-view",{staticClass:"uni-divider__line"})],1),i("v-uni-view",{staticClass:"douji-wrap"},e._l(e.viewConfig.gongfaConfig,(function(t){return i("v-uni-view",{key:t.key,staticClass:"list-cell flex-item-two"},[i("v-uni-view",{staticClass:"douji-list-left"},[e._v(e._s(t.label))]),i("v-uni-view",{staticClass:"uni-list-cell-db"},[i("v-uni-picker",{staticClass:"bg-picker-douji",attrs:{value:e.gongfaIndex[t.key],"range-key":"text",range:e.options.douji},on:{change:function(i){arguments[0]=i=e.$handleEvent(i),e.changeGongfa(i,t.key)}}},[i("v-uni-view",{staticClass:"uni-input",class:{active:0!==e.gongfaIndex[t.key]}},[e._v(e._s(e.options.douji[e.gongfaIndex[t.key]].text))])],1)],1)],1)})),1),i("v-uni-view",{staticClass:"save-btn"},[i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleChangeConfigInfo.apply(void 0,arguments)}}},[e._v("保存设置")])],1)],2)},s=[]},"63ab":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".background-picker .uni-input[data-v-07547dfb]{background:#ebedf0!important;padding:%?5?% %?25?%;overflow:hidden}.bg-picker-douji .uni-input[data-v-07547dfb]{background:#ebedf0!important;padding:%?5?% %?10?%;margin:%?10?%;overflow:hidden}",""]),e.exports=t},9679:function(e,t,i){var n=i("19f8");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("7582f2ac",n,!0,{sourceMap:!1,shadowMode:!1})},"9ef7":function(e,t,i){"use strict";i.r(t);var n=i("d533"),a=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},ae17:function(e,t,i){"use strict";i.r(t);var n=i("51d7"),a=i("9ef7");for(var s in a)"default"!==s&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i("d3dd"),i("0e8a");var o,r=i("f0c5"),l=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"07547dfb",null,!1,n["a"],o);t["default"]=l.exports},cf51:function(e,t,i){var n=i("63ab");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("063f3bea",n,!0,{sourceMap:!1,shadowMode:!1})},d3dd:function(e,t,i){"use strict";var n=i("cf51"),a=i.n(n);a.a},d533:function(e,t,i){"use strict";var n=i("4ea4");i("99af"),i("c740"),i("4160"),i("fb6a"),i("a434"),i("c19f"),i("ace4"),i("a9e3"),i("d3b7"),i("e25e"),i("25f0"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("2954"),i("649e"),i("219c"),i("b39a"),i("72f7"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("cc87")),s=n(i("f4bd")),o=n(i("b535")),r=i("bd14"),l=i("0ea9"),u=n(i("c997")),c=n(i("d7ac")),v={components:{mInput:u.default},filters:{statusFilter:function(e){var t={0:"关闭",1:"开启"};return t[e]},vipStatus:function(e){var t={0:"普通版",1:"VIP版"};return t[e]},valueFormatFilter:function(e){if(isNaN(e))return e;var t=Number(e);return isNaN(t)?"":t<0?"未获取到":t>1e8?(t/1e8).toFixed(1)+"亿":t>1e6?(t/1e4).toFixed(1)+"万":e}},data:function(){return{wdszSaleChannel:"",socketTask:null,platformName:"",serverName:"",lastServerIndex:0,allServerindex:0,utils:{},index:0,current:0,statusLoading:!1,yunguaji:!1,bayeSpecial:0,viewConfig:{},configInfo:{},options:{},gongfaObj:{},roleInfo:{},gongfaIndex:{},gongfaKey:[],flag:{loginFlag:!1,logoutFlag:!1,newUserFlag:!1,showServer:!1,saveRoleFlag:!1},fuzuStatus:{end_time:"",special_baye_endtime:"",on_off:0,fuzhu_vip:0,isExpired:!1},userInfo:{usernamePlatForm:"",passwordPlatForm:"",platform:1,server_id:"",endTime:"",loginType:1},loginInfo:{userId:""},serverInfo:{client_ip:"",server_list:[],last_server_list:[]},lixianbeishuList:[{value:"0",name:"一倍"},{value:"1",name:"两倍"},{value:"2",name:"三倍"}],youlibeishuList:[{value:"0",name:"一倍"},{value:"1",name:"两倍"}],roleList:[],roleIndex:0,selectRoleName:"",autocompleteStringList:[]}},computed:{isPassedTwoHours:function(){var e=(0,o.default)(new Date),t=(0,o.default)(this.roleInfo.update_time),i=e.diff(t);return i>72e5},showSpecial:function(){return this.bayeSpecial},currentLilianBeishu:function(){var e=this;return this.lixianbeishuList.findIndex((function(t){return Number(t.value)===e.configInfo.lixianbeishu}))},currentYouliBeishu:function(){var e=this;return this.youlibeishuList.findIndex((function(t){return Number(t.value)===e.configInfo.youlisifang_beishu}))}},onLoad:function(){this.viewConfig=getApp().globalData.viewConfig,this.configInfo=Object.assign({},getApp().globalData.viewConfig.configInfoDefault),this.roleInfo=Object.assign({},getApp().globalData.viewConfig.roleInfoDefault),this.gongfaIndex=Object.assign({},getApp().globalData.viewConfig.gongfaIndex),this.options=getApp().globalData.viewConfig.options,this.initGongfaConfig(),this.wdszSaleChannel=(0,r.getChannel)(),this.loadLoginInfo(),this.handleGetServerList(),this.handleGetUtils()},methods:{handleLogin:function(){uni.reLaunch({url:"../login/login"})},loginSwitch:function(){uni.navigateTo({url:"../login/login"})},transferTime:function(){uni.navigateTo({url:"../transfer/transfer"})},handleGetUtils:function(){var e=this,t={login_type:30};(0,l.getUtils)(t).then((function(t){e.utils=t,e.$global.ljxzVersion<t.version&&uni.showTabBarRedDot({index:3})})).catch((function(e){console.log(e)}))},handleSaveRole:function(){if(this.flag.saveRoleFlag){var e={roleName:this.roleInfo.role_name+"-"+this.serverName,userId:this.loginInfo.userId,platformName:this.platformName,loginType:this.userInfo.loginType,serverId:this.userInfo.server_id,serverName:this.serverName},t=this.roleList.findIndex((function(t){return t.roleName===e.roleName}));-1===t?this.roleList.unshift(e):this.roleList[t]=e,this.saveRoleInfo(),uni.showToast({title:"收藏成功",duration:2e3,icon:"none"})}else(0,r.toast)("角色信息错误，收藏失败！")},handleRemoveRole:function(){var e=this.roleInfo.role_name+"-"+this.serverName,t=this.roleList.findIndex((function(t){return t.roleName===e}));-1===t?uni.showToast({title:"收藏列表无该角色",duration:2e3,icon:"none"}):(this.roleList.splice(t,1),this.saveRoleInfo(),uni.showToast({title:"移除成功",duration:2e3,icon:"none"}))},handleClearSaveRole:function(){this.roleList=[],this.saveRoleInfo(),uni.showToast({title:"清空成功",duration:2e3,icon:"none"})},initGongfaConfig:function(){var e=this,t=getApp().globalData.viewConfig.gongfaConfig;t.length>0&&t.forEach((function(t){e.gongfaKey.push(t.key)}))},loadLoginInfo:function(){uni.setNavigationBarTitle({title:"战盟火箭辅助V"+this.$global.wdszVersionName}),console.log("加载登录信息"),this.roleList=s.default.getRoleList();var e=s.default.getGameLoginInfo();e.serverInfo&&(this.serverInfo=e.serverInfo),this.userInfo.platform=e.platform,this.userInfo.server_id=e.server_id,this.userInfo.usernamePlatForm=e.usernamePlatForm,this.userInfo.passwordPlatForm=e.passwordPlatForm,this.userInfo.loginType=e.loginType,this.loginInfo.userId=e.userId,this.platformName=e.platformName,this.flag.showServer=e.showServer,Array.isArray(e.autocompleteStringList)&&(this.autocompleteStringList=e.autocompleteStringList),this.initSaveData(),this.handleGuajiStatus()},saveLoginInfo:function(){var e={platform:this.userInfo.platform,server_id:this.userInfo.server_id,usernamePlatForm:this.userInfo.usernamePlatForm,passwordPlatForm:this.userInfo.passwordPlatForm,loginType:this.userInfo.loginType,userId:this.loginInfo.userId,showServer:this.flag.showServer,platformName:this.platformName,serverInfo:this.serverInfo,autocompleteStringList:this.autocompleteStringList};s.default.setGameLoginInfo(e)},saveRoleInfo:function(){s.default.setRoleList(this.roleList)},initSaveData:function(){var e=this.getIndexByServerId(this.serverInfo.last_server_list,this.userInfo.server_id);-1!==e&&(this.lastServerIndex=e,this.serverName=this.serverInfo.last_server_list[this.lastServerIndex].text)},getIndexByServerId:function(e,t){if(e){var i=e.findIndex((function(e){return e.server_id===t}));return i}},getServerIdByIndex:function(e,t){if(e){var i=e[t]["server_id"];return i}},changeSavedRoleList:function(e){this.selectRoleName=this.roleList[e.target.value]["roleName"],this.loginInfo.userId=this.roleList[e.target.value]["userId"],this.userInfo.server_id=this.roleList[e.target.value]["serverId"],this.userInfo.loginType=this.roleList[e.target.value]["loginType"],this.platformName=this.roleList[e.target.value]["platformName"],this.handleGetServerList(),this.initSaveData(),this.handleGuajiStatus(),this.saveLoginInfo()},changeLastServer:function(e){this.userInfo.server_id=this.getServerIdByIndex(this.serverInfo.last_server_list,e.target.value),this.lastServerIndex=e.target.value,this.serverName=this.serverInfo.last_server_list[this.lastServerIndex].text,this.saveLoginInfo(),this.handleGuajiStatus()},changeAllServer:function(e){this.userInfo.server_id=(0,r.getValueByIndex)(this.serverInfo.server_list,e.target.value),this.allServerindex=e.target.value,this.lastServerIndex=(0,r.getIndexByValue)(this.serverInfo.last_server_list,this.userInfo.server_id),this.saveLoginInfo()},handleGerServer:function(){this.handleGetServerList()},websocketSend:function(e,t){var i=c.default.deflate(JSON.stringify(t)),n=i.byteLength,a=16+n,s=new ArrayBuffer(a),o=new DataView(s);o.setUint32(0,a),o.setUint32(4,0),o.setUint16(8,0),o.setUint32(10,e),o.setUint16(14,2);var r=new Uint8Array(s,16);r.set(i),this.socketTask.send({data:s,success:function(){console.log("消息发送成功")},fail:function(){console.log("消息发送失败")}})},websocketOnOpen:function(){var e="agame";1!==this.userInfo.loginType&&(e="agame_channels");var t={Agent:e,UserName:this.userInfo.usernamePlatForm,sessionid:"",Page:0};this.websocketSend(16001,t)},websocketonmessage:function(e){var t=e.slice(16),i=new DataView(e),n=i.getUint32(10),a=JSON.parse(c.default.inflate(t,{to:"string"}));16002===n&&(this.serverInfo.last_server_list=this.formatServerList(a.SvrList),this.saveLoginInfo(),uni.showToast({title:"更新服务器成功。",duration:2e3,icon:"none"}),this.socketTask.close())},formatServerList:function(e){var t=[];return e.forEach((function(e){var i={url:"ws://"+e.LoginIp+":"+e.LoginPort+"/",text:e.SvrName,server_id:e.SvrId};t.push(i)})),t},handleGetServerList:function(){var e=this,t={login_type:this.userInfo.loginType};(0,l.getServerInfo)(t).then((function(t){e.serverInfo.last_server_list=t.server.guanfu})).catch((function(e){console.log(e)}))},handleGuajiStatus:function(){var e=this;if(this.loginInfo.userId){if(!this.userInfo.server_id){var t=this.$store.state.verifyCodePassowrd,i="请选择服务器";return t&&(i="请选择服务器,请妥善保管您的辅助密码：".concat(t,"，后面可以用该密码登录辅助，转移辅助。")),void uni.showModal({title:"提示",content:i,showCancel:!1,confirmText:"好的",success:function(e){e.confirm?console.log("用户点击确定"):e.cancel&&console.log("用户点击取消")}})}var n={userid:this.loginInfo.userId,server_id:this.userInfo.server_id,login_type:this.userInfo.loginType,t:(new Date).getTime()};this.statusLoading=!0,(0,l.getRoleInfo)(n).then((function(t){var i=t.code;switch(e.statusLoading=!1,i){case 200:e.roleInfo=t.data,e.yunguaji=!0,e.flag.saveRoleFlag=!0,uni.showToast({title:"查询挂机状态成功",duration:2e3,icon:"none"});break;case 403:e.flag.saveRoleFlag=!1,uni.showToast({title:"参数错误",duration:2e3,icon:"none"});break;case 404:e.yunguaji=!1,console.log("404"),e.flag.saveRoleFlag=!1,e.roleInfo=Object.assign({},roleInfoDefault),uni.showToast({title:"未查询到挂机信息，请开启云挂机111",duration:2e3,icon:"none"});break}})).catch((function(t){e.flag.saveRoleFlag=!1,console.log(t)})),this.handleGetConfigInfo()}else uni.showToast({title:"没有获取到登录的用户信息，请重新登录。",duration:2e3,icon:"none"})},handleGetConfigInfo:function(){var e=this;if(this.loginInfo.userId&&this.userInfo.server_id){var t={userid:this.loginInfo.userId,server_id:this.userInfo.server_id,t:(new Date).getTime()};(0,l.getConfigInfo)(t).then((function(t){var i=t.code;switch(i){case 200:e.configInfo=e.correctConfig(t.data.setting_content),e.fuzuStatus.fuzhu_vip=t.data.fuzhu_vip,e.fuzuStatus.on_off=t.data.on_off,e.fuzuStatus.special_baye_endtime=t.data.special_baye_endtime,e.bayeSpecial=t.data.special_baye,e.calsIsExpired(t.data.end_time),e.calcdouji_goumai(String(t.data.setting_content.douji_goumai)),e.changeSpecialBayeOptioon(e.bayeSpecial);break;case 403:uni.showToast({title:"参数错误",duration:2e3,icon:"none"});break;case 404:e.yunguaji=!1,uni.showToast({title:"未查询到挂机信息，请开启云挂机",duration:2e3,icon:"none"}),e.fuzuStatus.on_off=0,e.configInfo=Object.assign({},configInfoDefault);break}})).catch((function(e){console.log(e)}))}else uni.showToast({title:"没有获取到登录的用户信息，请重新登录",duration:2e3,icon:"none"})},correctConfig:function(e){var t=Object.assign({},this.viewConfig.configInfoDefault);for(var i in t)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},changeSwitchBoolean:function(e){this.configInfo[e]?this.configInfo[e]=0:this.configInfo[e]=1},changePickerConfig:function(e,t){var i=e.target.value;this.configInfo[t]=i},changePickerSwith:function(e,t){var i=e.target.value;i?this.$toast("请选择左侧列表中选项"):this.configInfo[t]=0},changeGongfa:function(e,t){var i=e.target.value;this.gongfaIndex[t]=i},calcdouji_goumai:function(e){var t=this;isNaN(e)&&(e="101010101010"),this.gongfaKey.forEach((function(i,n){var a=e.slice(2*n,2+2*n);t.gongfaIndex[i]=parseInt(a)-10}))},gendouji_goumaiCfg:function(){var e=this,t="";return this.gongfaKey.forEach((function(i){var n=String(e.gongfaIndex[i]+10);t+=n})),t},calsIsExpired:function(e){var t=(0,o.default)(e).isBefore(new Date);t?(this.fuzuStatus.isExpired=!0,this.fuzuStatus.end_time="已经过期，请购买！"):(this.fuzuStatus.isExpired=!1,this.fuzuStatus.end_time=e)},handleChangeConfigInfo:function(){var e=this;this.configInfo.douji_goumai=this.gendouji_goumaiCfg();var t={userid:this.loginInfo.userId,server_id:this.userInfo.server_id,pwd_md5:a.default.MD5(this.userInfo.passwordPlatForm).toString(),on_off:this.fuzuStatus.on_off,setting_content:this.configInfo};(0,l.changeConfigInfo)(t).then((function(t){var i=t.code;switch(i){case 200:e.handleGetConfigInfo(),uni.showToast({title:"修改成功",duration:2e3,icon:"none"});break;case 403:uni.showToast({title:"参数错误",duration:2e3,icon:"none"});break;case 404:e.yunguaji=!1,uni.showToast({title:"未查询到挂机信息，请开启云挂机",duration:2e3,icon:"none"});break}})).catch((function(e){console.log(e)}))},handleStartguaji:function(){var e=this;if(this.loginInfo.userId&&this.userInfo.server_id){var t={userid:this.loginInfo.userId,server_id:this.userInfo.server_id,pwd_md5:a.default.MD5(this.userInfo.passwordPlatForm).toString()};(0,l.startGuaji)(t).then((function(t){var i=t.code;switch(i){case 200:uni.showToast({title:"挂机成功，请15秒后查询挂机状态",duration:2e3,icon:"none"}),e.handleGuajiStatus();break;case 300:uni.showToast({title:"新用户挂机成功，请15秒后查询挂机状态",duration:2e3,icon:"none"});break;case 403:uni.showToast({title:"挂机失败，请重新登录后重试",duration:2e3,icon:"none"});break}var n=e;setTimeout((function(){n.handleGuajiStatus()}),15e3)}))}else uni.showToast({title:"没有获取到登录的用户信息，请重新登录",duration:2e3,icon:"none"})},handleStopguaji:function(){var e=this,t={userid:this.loginInfo.userId,server_id:this.userInfo.server_id,pwd_md5:a.default.MD5(this.userInfo.passwordPlatForm).toString()};(0,l.stopGuaji)(t).then((function(t){var i=t.code;switch(i){case 200:e.handleGuajiStatus(),uni.showToast({title:"停止挂机成功",duration:2e3,icon:"none"});break;case 403:uni.showToast({title:"操作失败",duration:2e3,icon:"none"});break;case 404:uni.showToast({title:"操作失败",duration:2e3,icon:"none"});break}}))},doCopy:function(){if(this.userInfo.server_id&&this.loginInfo.userId){var e="服务器:".concat(this.userInfo.server_id,",续费ID:").concat(this.loginInfo.userId,",游戏:wdsz");this.$copyText(e).then((function(e){(0,r.toast)("复制成功,可用于辅助续费充值")}),(function(e){(0,r.toast)("复制失败")}))}else(0,r.toast)("复制失败,没有选择服务器或者没有登录")},radioChangeLixian:function(e){switch(this.configInfo.lixianbeishu=Number(e.target.value),Number(e.target.value)){case 0:uni.showToast({title:"选择一倍，免费",duration:2e3,icon:"none"});break;case 1:uni.showToast({title:"选择两倍，要钻石",duration:2e3,icon:"none"});break;case 2:uni.showToast({title:"选择五倍，要钻石",duration:2e3,icon:"none"});break}},radioChangeYouli:function(e){switch(this.configInfo.youlisifang_beishu=Number(e.target.value),Number(e.target.value)){case 0:uni.showToast({title:"选择一倍，免费",duration:2e3,icon:"none"});break;case 1:uni.showToast({title:"选择两倍，要钻石",duration:2e3,icon:"none"});break}},getAttrClass:function(e){return 1===e?"attr-flex-item-1":2===e?"attr-flex-item-2":"attr-flex-item-3"},checkShow:function(e){return!e||this.bayeSpecial},changeSpecialBayeOptioon:function(e){2===e&&3===this.options.is_special_baye.length&&(this.options.is_special_baye.push({value:3,text:"跟随二生三"}),this.options.is_special_baye.push({value:4,text:"跟随专一"}),this.options.is_special_baye.push({value:5,text:"跟随午一"}),this.options.special_baye_option.push({value:5,text:"跟随二生三"}),this.options.special_baye_option.push({value:6,text:"跟随专一"}),this.options.special_baye_option.push({value:7,text:"跟随午一"}))}}};t.default=v}}]);